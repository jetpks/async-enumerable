prelude: |
  require 'async_enumerable'
  
  # Simulate IO operations with varying delays
  def io_operation(n)
    sleep(rand / 1000.0) # Sleep 0-1ms to simulate IO
    n * 2
  end
  
  small_array = (1..10).to_a
  medium_array = (1..50).to_a
  large_array = (1..100).to_a

benchmark:
  sync_small: |
    small_array.map { |n| io_operation(n) }
  
  async_small: |
    small_array.async.map { |n| io_operation(n) }
  
  sync_medium: |
    medium_array.map { |n| io_operation(n) }
  
  async_medium: |
    medium_array.async.map { |n| io_operation(n) }
  
  sync_large: |
    large_array.map { |n| io_operation(n) }
  
  async_large: |
    large_array.async.map { |n| io_operation(n) }